<!DOCTYPE html>
<html>

<head>
  <base href="$FLUTTER_BASE_HREF">
  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="description" content="Daily Stock Manager - 日用品管理アプリ">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Daily Stock Manager">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">
  <link rel="icon" type="image/png" href="favicon.png" />
  <title>Daily Stock Manager</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>
  <div id="loading" style="
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    font-family: Inter, sans-serif;
  ">
    <div>📱 アプリケーションを読み込み中...</div>
  </div>

  <script>
    // Alternative initialization method
    (function() {
      var serviceWorkerVersion = "***flutter_service_worker_version***";
      
      // Load Flutter script
      var script = document.createElement('script');
      script.src = 'flutter.js';
      script.onload = function() {
        setTimeout(function() {
          if (window._flutter && window._flutter.loader) {
            try {
              // Simple initialization without buildConfig
              window._flutter.loader.loadEntrypoint({
                serviceWorker: {
                  serviceWorkerVersion: serviceWorkerVersion,
                }
              }).then(function(engineInitializer) {
                return engineInitializer.initializeEngine();
              }).then(function(appRunner) {
                document.getElementById('loading').style.display = 'none';
                return appRunner.runApp();
              }).catch(handleError);
            } catch (e) {
              // Fallback to even simpler initialization
              window._flutter.loader.load().then(function(engine) {
                document.getElementById('loading').style.display = 'none';
                return engine.runApp();
              }).catch(handleError);
            }
          } else {
            handleError(new Error('Flutter loader not available'));
          }
        }, 100);
      };
      script.onerror = handleError;
      document.head.appendChild(script);
      
      function handleError(error) {
        console.error('Flutter initialization error:', error);
        document.getElementById('loading').innerHTML = `
          <div style="color: #d32f2f; padding: 20px;">
            <div>⚠️ アプリケーションの読み込みに失敗しました</div>
            <div style="margin-top: 10px; font-size: 14px;">
              ページを再読み込みしてください
            </div>
            <button onclick="window.location.reload()" style="
              margin-top: 15px;
              padding: 8px 16px;
              background: #1976d2;
              color: white;
              border: none;
              border-radius: 4px;
              cursor: pointer;
            ">
              再読み込み
            </button>
          </div>
        `;
      }
    })();
  </script>
</body>

</html> 